<?xml version="1.0" encoding="UTF-8"?>
	<!--
		Rabbit game template file
	-->
<things version="0">
	
	<!--

		HERO

	-->
	<entity name="Hero" template="RabbitBase">
		<component name="Data" type="com.somewater.rabbit.components.HeroDataComponent" />
		<component name="Spatial">
			<!--tile type="RandomTilePoint.free"></tile-->
		</component>
		<component type="com.somewater.rabbit.components.InputComponent" name="Input"/>
		<component type="com.somewater.rabbit.components.HarvesterComponent" name="Harvester"/>		
	</entity>
	
	
	
	
	<!--

		RABBIT

	-->
	<template name="Rabbit" template="RabbitBase">
		<component name="Spatial">
			<tile type="RandomTilePoint.free"></tile>
		</component>
		<component name="RandomMover" type="com.somewater.rabbit.components.RandomMovingComponent"/>
	</template>
	
	
	
	
	<!--

		RABBIT BASE

	-->
	<template name="RabbitBase" template="Animal" sets="victim">
		<component name="Mover">
			<speed>7</speed>
		</component>
		<component name="Spatial">	
			<objectMask childType="String">victim</objectMask>
		</component>
		<component name="Render">
			<slug>rabbit.RabbitActor</slug>	
			<useDirection>8</useDirection>		
		</component>
	</template>
	
	
	<!--

		BUSH

	-->
	<template name="Bush" template="IsoMover" sets="wall">
		<component name="Render">
			<slug>rabbit.BushActor</slug>
			<useDirection>4</useDirection>
		</component>
		<component name="Spatial">
			<objectMask childType="String">
				<_0>wall</_0>
			</objectMask>
			<passMask>1</passMask>
			<occupyMask>3</occupyMask>			
			<size>
				<x>1</x>
				<y>1</y>
			</size>
			<tile type="RandomTilePoint.free"></tile>			
		</component>
		<component name="RandomMover" type="com.somewater.rabbit.components.RandomMovingComponent"/>
	</template>
	
	
	
	<!--

		CARROT

	-->
	<template name="Carrot" template="Iso" sets="wall,harvest">
		<component name="Render">
			<slug>rabbit.CarrotActor</slug>
			<useDirection>1</useDirection>
		</component>
		<component name="Spatial">
			<objectMask childType="String">
				<_0>wall</_0>
				<_1>harvest</_1>
			</objectMask>
			<passMask>1</passMask>
			<occupyMask>1</occupyMask>
			<size>
				<x>1</x>
				<y>1</y>
			</size>		
			<tile type="RandomTilePoint.free"></tile>			
		</component>
		<component type="com.somewater.rabbit.components.GenocideComponent" name="Genocide"/>
	</template>
	
	
	
	
	
	<!--

		BEAM

	-->
	<template name="Beam" template="Iso" sets="wall">
		<component type="com.somewater.rabbit.creature.BeamRendererComponent" name="Render">
			<scene entityName="SceneDB" componentName="Scene"/>
			<positionProperty>@Spatial.position</positionProperty>
			<slug>rabbit.Beam</slug>
			<useDirection>1</useDirection>
			<height>-1</height>
		</component>
		<component name="Spatial" type="com.somewater.rabbit.creature.BeamSpatialComponent">
			<spatialManager entityName="SceneDB" componentName="Spatial"/>
			<objectMask childType="String">
				<_1>wall</_1>
			</objectMask>
			<passMask>1</passMask>
			<occupyMask>3</occupyMask>
			<partialOccupyMask>1</partialOccupyMask>
			<size>
				<x>3</x>
				<y>1</y>
			</size>
			<tile type="RandomTilePoint.free"></tile>
		</component>		
	</template>
	
	
	
	
	
	<!--

			WATCHDOG
		(and his kennel)
	-->
	<template name="WatchDog" template="Animal">
		<component name="Mover">
			<speed>2</speed>
		</component>
		<component name="Render">
			<slug>rabbit.WatchDogActor</slug>	
			<useDirection>4</useDirection>		
		</component>
		<component name="Helix" type="com.somewater.rabbit.components.HelixComponent">
			<shellType>Kennel</shellType>
			<leadLength>3</leadLength>
		</component>
		<component name="Logic" type="com.somewater.rabbit.logic.LogicComponent">
		</component>
		<component name="Attack" type="com.somewater.rabbit.components.AttackComponent">
			<victimName>Hero</victimName>
			<priority>2</priority>
			<attackRange>0.1</attackRange>
			<attackInterval>1000</attackInterval>
			<searchRadius>1</searchRadius>
		</component>
		<component name="Hunter" type="com.somewater.rabbit.components.HunterComponent">
			<priority>1</priority>
			<victimName>Hero</victimName>
			<searchRadius>4</searchRadius>
		</component>
		<component name="Walk" type="com.somewater.rabbit.components.WalkComponent">
			<priority>-10</priority>
		</component>
		<component name="LeadRender" type="com.somewater.rabbit.components.LeadRendererComponent">
		</component>
	</template>
	
	
	
	
	<!--

		KENNEL

	-->
	<template name="Kennel" template="Iso" sets="wall">
		<component name="Render">
			<slug>rabbit.KennelActor</slug>
			<useDirection>1</useDirection>
			<height>-1</height>
		</component>
		<component name="Spatial">
			<passMask>1</passMask>
			<occupyMask>3</occupyMask>
			<size>
				<x>1</x>
				<y>1</y>
			</size>		
		</component>
	</template>
	
	
	
	<!--
		
		HEDGEHOG
	
	-->
	<template name="Hedgehog" template="Animal">
		<component name="Mover">
			<speed>1</speed>
		</component>
		<component name="Render">
			<slug>rabbit.HedgehogActor</slug>	
			<useDirection>4</useDirection>		
		</component>
		<component name="Logic" type="com.somewater.rabbit.logic.LogicComponent">
		</component>
		<component name="Attack" type="com.somewater.rabbit.components.AttackComponent">
			<victimName>Hero</victimName>
			<priority>2</priority>
			<attackRange>0.1</attackRange>
			<attackInterval>1000</attackInterval>
			<searchRadius>1</searchRadius>
		</component>
		<component name="Walk" type="com.somewater.rabbit.components.WalkComponent">
			<priority>-10</priority>
		</component>
	</template>
	
	
	<!--
	
		ANIMAL
		(ISO MOVER analog without special functions)
	
	-->
	<template name="Animal" template="IsoMover">
		<component name="Mover">
			<speed>1</speed>
			<patience>1</patience>
		</component>
		<component name="Spatial">	
			<passMask>2</passMask>
			<occupyMask>1</occupyMask>
			<size>
				<x>0</x>
				<y>0</y>
			</size>
		</component>
	</template>
	
	
	
	
	
	
	<!--

		ISO MOVER

	-->
	<template name="IsoMover" template="Iso">
		<component name="Render">
			<useDirection>1</useDirection>
		</component>
		<component type="com.somewater.rabbit.iso.IsoMover" name="Mover">
		</component>
	</template>
	
	
	
	<!--

		ISO

	-->
	<template name="Iso">
		<component type="com.somewater.rabbit.iso.IsoSpatial" name="Spatial">
			<spatialManager entityName="SceneDB" componentName="Spatial"/>
		</component>
		<component type="com.somewater.rabbit.iso.IsoRenderer" name="Render">
			<scene entityName="SceneDB" componentName="Scene"/>
			<positionProperty>@Spatial.position</positionProperty>
		</component>
	</template>
	
	<!--entity name="BallSheet">
		<component type="com.pblabs.rendering2D.spritesheet.SpriteSheetComponent"
			name="SpriteSheet">
			<image filename="../assets/Images/ball.png" />
		</component>
	</entity>

	<entity name="CoinSheet">
		<component type="com.pblabs.rendering2D.spritesheet.SpriteSheetComponent"
			name="SpriteSheet">
			<image filename="../assets/Images/coin.png" />
		</component>
	</entity>

	<entity name="WelcomeSheet">
		<component type="com.pblabs.rendering2D.spritesheet.SpriteSheetComponent"
			name="SpriteSheet">
			<image filename="../assets/Images/welcome.png" />
			<center>
				<x>0</x>
				<y>0</y>
			</center>
		</component>
	</entity>

	<entity name="SpatialDB">
		<component type="com.pblabs.rendering2D.BasicSpatialManager2D"
			name="Manager" />
	</entity>

	<entity name="Scene">
		<component type="com.pblabs.rendering2D.DisplayObjectScene"
			name="Scene">
			<sceneViewName>MainView</sceneViewName>
			<position>
				<x>-320</x>
				<y>-240</y>
			</position>
		</component>
	</entity>

	<entity name="WelcomeScreen">
		<component type="com.pblabs.rendering2D.SpriteSheetRenderer"
			name="Sprite">
            <scene entityName="Scene" componentName="Scene"/>
			<spriteSheet componentReference="WelcomeSheet" />
			<layerIndex>4</layerIndex>
		</component>
		<component type="com.pblabs.animation.AnimatorComponent"
			name="FadeAnimator">
			<reference>@Sprite.alpha</reference>
			<defaultAnimation></defaultAnimation>
			<animations>
				<FadeOut type="com.pblabs.animation.Animator">
					<animationType>PLAY_ANIMATION_ONCE</animationType>
					<startValue type="Number">1</startValue>
					<targetValue type="Number">0</targetValue>
					<duration>1</duration>
				</FadeOut>
			</animations>
		</component>
	</entity>

	<template name="BasePlayer">
		<component type="com.pblabs.rollyGame.BallSpriteRenderer"
			name="Sprite">
            <scene entityName="Scene" componentName="Scene"/>
			<layerIndex>2</layerIndex>
			<positionProperty>@Spatial.position</positionProperty>
			<sizeReference>@Spatial.BallScale</sizeReference>
		</component>
		<component type="com.pblabs.rollyGame.BallShadowRenderer"
			name="Shadow">
            <scene entityName="Scene" componentName="Scene"/>
			<Map entityName="LevelMap" />
			<layerIndex>1</layerIndex>
			<positionProperty>@Spatial.position</positionProperty>
		</component>
		<component type="com.pblabs.rollyGame.BallMover" name="Spatial">
			<Map entityName="LevelMap" />
			<position>
				<x>320</x>
				<y>240</y>
			</position>
			<PickupSound>../assets/Sounds/pickup.mp3</PickupSound>
			<PickupType>
				<_>Coin</_>
			</PickupType>
			<spatialManager entityName="SpatialDB" />
			<size>
				<x>32</x>
				<y>32</y>
			</size>
			<objectMask>
				<_>Renderable</_>
			</objectMask>
			<Input childType="com.pblabs.engine.core.InputKey">
				<GoLeft>LEFT</GoLeft>
				<GoRight>RIGHT</GoRight>
				<GoUp>UP</GoUp>
				<GoDown>DOWN</GoDown>
			</Input>
		</component>
	</template>

	<template name="Coin" sets="CoinSet">
		<component type="com.pblabs.rendering2D.SimpleSpatialComponent"
			name="Spatial">
			<spatialManager componentReference="SpatialDB" />
			<objectMask>
				<_>Renderable</_>
				<_>Coin</_>
			</objectMask>
			<position>
				<x>320</x>
				<y>240</y>
			</position>
			<size>
				<x>24</x>
				<y>24</y>
			</size>
		</component>
		<component type="com.pblabs.rendering2D.SpriteSheetRenderer"
			name="Sprite">
			<scene entityName="Scene" componentName="Scene"/>
			<spriteSheet componentReference="CoinSheet" />
			<positionProperty>@Spatial.position</positionProperty>
			<layerIndex>1</layerIndex>
		</component>
	</template>

	<group name="Everything">
		<objectReference name="CoinSheet" />
		<objectReference name="BallSheet" />
		<objectReference name="WelcomeSheet" />
		<objectReference name="SpatialDB" />
		<objectReference name="Scene" />
		<objectReference name="WelcomeScreen" />
	</group>

	<template name="BaseLevel">
		<component type="com.pblabs.rendering2D.spritesheet.SpriteSheetComponent"
			name="Normal">
			<center>
				<x>0</x>
				<y>0</y>
			</center>
		</component>
		<component type="com.pblabs.rendering2D.spritesheet.SpriteSheetComponent"
			name="Diffuse">
			<center>
				<x>0</x>
				<y>0</y>
			</center>
		</component>
		<component type="com.pblabs.rendering2D.spritesheet.SpriteSheetComponent"
			name="Height">
			<center>
				<x>0</x>
				<y>0</y>
			</center>
		</component>
		<component type="com.pblabs.rendering2D.SpriteSheetRenderer"
			name="Sprite">
            <scene entityName="Scene" componentName="Scene"/>
			<spriteSheet componentName="Diffuse" />
		</component>
		<component type="com.pblabs.rollyGame.NormalMap" name="Normals">
			<NormalSheet componentName="Normal" />
			<HeightSheet componentName="Height" />
		</component>
	</template>

	<entity name="Level1Map" alias="LevelMap" template="BaseLevel">
		<component name="Normal">
			<image filename="../assets/Images/level1_normal.png" />
		</component>
		<component name="Diffuse">
			<image filename="../assets/Images/level1_diffuse.png" />
		</component>
		<component name="Height">
			<image filename="../assets/Images/level1_height.png" />
		</component>
	</entity>

	<entity name="Player1" template="BasePlayer">
		<component name="Spatial">
			<OnFirstMoveAnimation componentReference="WelcomeScreen"
				componentName="FadeAnimator" />
		</component>
	</entity>

	<group name="Level1">
		<objectReference name="Level1Map" />
		<objectReference name="Player1" />
		<objectReference name="Coin" />
	</group>

	<entity name="Level2Map" alias="LevelMap" template="BaseLevel">
		<component name="Normal">
			<image filename="../assets/Images/level2_normal.png" />
		</component>
		<component name="Diffuse">
			<image filename="../assets/Images/level2_diffuse.png" />
		</component>
		<component name="Height">
			<image filename="../assets/Images/level2_height.png" />
		</component>
	</entity>

	<group name="Level2">
		<objectReference name="Level2Map" />
		<objectReference name="BasePlayer" />
        <objectReference name="Coin" />
        <objectReference name="Coin" />
	</group-->

</things>